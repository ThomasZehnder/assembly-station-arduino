<!DOCTYPE html>
<html>

<head>
    <title>IIoT Demonstrator</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="stylesheet" href="style.css">




    <script>

        function loadMain(articleUrl, asideUrl, param) {
            loadArticle(articleUrl, param);
            loadAside(asideUrl);
        }

        function loadArticle(url, param) {
            fetch(url)
                .then(function (response) {
                    return response.text();
                })
                .then(function (html) {
                    //console.log(html);
                    const myArticle = document.getElementById("articleId");
                    myArticle.innerHTML = html;

                    //execude page initializizer
                    //console.log("loaded url: ", url);
                    if (url.startsWith('a-config')) {
                        //console.log("Load Configpage: ", param)
                        loadElement(param, "preId");
                    }
                    else if (url.startsWith('a-files')) {
                        console.log("Load files: ", param)
                        loadElement(param, "preId");
                    }
                });
        }

        function loadAside(url, param) {

            fetch(url)
                .then(function (response) {
                    return response.text();
                })
                .then(function (html) {
                    //console.log(html);
                    const myArticle = document.getElementById("asideId");
                    myArticle.innerHTML = html;
                });
        }

        function loadElement(url, id) {
            fetch(url)
                .then(function (response) {
                    return response.text();
                })
                .then(function (html) {
                    //console.log(html);
                    const myArticle = document.getElementById(id);
                    myArticle.innerHTML = html;
                });
        }        
    </script>
</head>

<body onload="loadMain('a-home.html', 'aa-home.html',0);">
    <header>
        <h1>IIoT Demonstrator with ESP8266</h1>
    </header>
    <nav>
        <ul>
            <li><a onclick="loadMain('a-home.html', 'aa-home.html',0);">Home</a></li>
            <li><a onclick="loadArticle('a-files.html', 'dir');">Files</a></li>
            <li><a onclick="loadArticle('a-javascript.html');">Javascript</a></li>
            <li><a onclick="loadMain('a-config.html', 'aa-config.html','config_main.json');">Config</a></li>
            <li><a onclick="loadArticle('a-contact.html');">Contact</a></li>
        </ul>
        <img src="logo.png" width="20%">

    </nav>


    <main>
        <article id="articleId">
            <h2> ... loading dynamicaly...</h2>

        </article>
        <aside id="asideId">
            <h2>... loading dynamicaly...</h2>

            <button onclick="loadArticle('a-home.html');">Home</button>
            <button onclick="loadArticle('dir');">Show files on ESP</button>
            <button onclick="loadArticle('upload');">Upload Page e.g. adopt configuration</button>
            <button onclick="loadArticle('reboot');">Reboot Arduino, e.g. to activate new configuration</button>

        </aside>

    </main>

    <footer>
        <p>&copy;Copyright 2023 by avm. All rights reversed.</p>
    </footer>

</body>

</html>